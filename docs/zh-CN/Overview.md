AppChain 链上治理方案之议会制

本方案借鉴 Substrate 治理方案，除提供直接修改节点代码（硬分叉）功能之外，均与 Substrate 一致。

参考：https://github.com/paritytech/polkadot/wiki/Governance

# 概述

本方案实现了一套完整的链上治理机制，机制包括由选举产生的议会、民众提案队列，以及全民表决系统。提案由普通用户提出，经议会初次表决通过后交由全民表决；提案也可以由普通用户通过民众提案队列初次表决后交由全民表决。经全民表决通过的提案即可在链上执行，从而实现系统自治。

# Proposal / 提案

提案内容

- 普通提案
  - 欲调用的功能（合约地址）
  - 调用参数
  - 生效最小块高度（0 代表通过后立即生效）
- 否决提案
  - 该提案用来否决已进入全民表决但尚未表决通过的提案
- 提案举例
  - 修改宪法
    - 修改 Concil、Proposal Queue、Referendum 等合约参数
    - 修改上述合约的指向地址
  - 执行高权限操作
    - 增删超级节点
  - 弹劾某议员
  - 否决已通过决议
  - 执行合约
    - 合约内容包含上述一条或多条操作

提案发起人

不限，任何人都可以发起。

提案路径

- 通过议会提供的入口提案
- 通过提案队列入口提案
- 其他提案包含的新提案

# Concil / 议会

议员任期

议员任期为 3 个月（可通过提案设置）

议员选举

议员选举是一个连续过程，任何人都可通过抵押小额代币来申请参加议员竞选。候选议员在任何时候都可以得到用户的投票，当某个议员的任期结束后，获得用户投票最多的候选议员自动当选。

发起提案

任何人都可以向议会发起提案。

提案初次表决

在提案未被否决和未被通过之前，议员都可以对提案内容进行表决或重新表决。表决动作包括赞同、否决和弃权（未表决视为弃权）。不同议员的投票权重相同。表决/重复表决可以选择赞同、否决和弃权三种态度。

提案通过

1. 当某普通提案获得 100% 的赞同票时，提案通过
2. 当某普通提案获得超过 50% 的赞同票
   1. 且提案时间超过 1 个月后，提案通过
   2. 曾经获得否决票，提案通过
3. 当某普通提案获得任一否决票时
   1. 提案关闭，并在 3 天 再次投票（之前投否决票的议员不能再次投否决投票，可以投赞同或弃权票）
   2. 直到满足前述 1、2 两个条件，提案通过
4. 当某否决提案获得 100% 赞同票时，提案通过
   1. 对对应的进入全民表决阶段、尚未执行的某提案进行撤销
5. 通过的提案被发往 Referendum 进行全民表决

# Proposal Queue / 提案队列

发起提案

任何人都可以向提案队列发起提案，但发起提案时必须附带规定的最小押金。

支持提案

任何人都可以向提案队列中的提案进行“支持”，支持的方式为增加提案押金。

提案确认

每隔一段固定时间（一个月），提案队列中获得累计押金最多的提案得到确认，得到确认的提案被发往 Referendum 进行全民表决。同时，该提案已经获得的押金被自动撤回给抵押人。

# Referendum / 全民表决

说明

- 全民表决是对由议会推送或提案队列推送的填进行表决，表决按照投票人在最终统计票数时持有的系统代币进行加权统计
- 不同的提案来源，提案提交时不同的议会赞同率将采用不同的全民表决通过标准

通过标准

以下弃权、赞同、反对等投票状态均代表链上任意地址按照持有系统代币数加权统计的投票信息；弃权票包括未明确表示态度的沉默票。

- 对于获得 100% 的议员赞同票的提案来说：
  - 所有的弃权票记为“赞同”
  - 要求赞同票比例 > 50%
- 对于获得大于 50% 的议员赞同票（但不到 100%）的提案来说：
  - 所有的弃权票按照已投票中赞同、反对的比例均匀记为赞同和反对票
  - 要求赞同票比例 > 50%
- 对于来自提案队列的提案来说：
  - 所有的弃权票记为“反对”
  - 要求赞同票比例 > 50%
- 对于由提案发起的新提案来说：
  - 继承原提案的通过标准

否决期

- 通过后的提案进入否决期
- Concil 可以在此期间（3 天）发起一个议员通过率 100% 的针对性否决提案
- 该提案无需经过全民表决即可执行，执行结果是取消对应的待执行提案

执行

- 否决期结束后，（在提案预定的生效块后）任何人都可以发起交易触发提案运行
